<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    {% from "other_macros.html" import head_elements %}
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    {{ head_elements() }}
    <title>Notes</title>
</head>
<body>
    {% from "button_macros.html" import cancel_search %}
    {% from "other_macros.html" import new_note, search_box %}
    {% from "meta_macros.html" import render_notes, links_bar %}
    

    <div class="header_bar">
        {{ links_bar('main')}}
        <h1 class = "title" >Notes</h1>
        {{ search_box('index', query) }}        
    </div>


    <main class="main_app">
        <div class = "notes_list">
            {% if query %}
                {{ cancel_search('index') }}
                {% if search_results.main or search_results.archive or search_results.bin %}
                    
                    <h2 class = "search_results">Search Results for: "{{ query }}"</h2>
                    {% if search_results.main %}
                        <h3>Main</h3>
                        {{ render_notes(search_results.main, 'main') }}
                    {% endif %}
                    {% if search_results.archive %}
                        <h3>Archive</h3>
                        {{ render_notes(search_results.archive,'archive') }}                  
                    {% endif %}
                    {% if search_results.bin %}
                        <h3>Bin</h3>
                        {{ render_notes(search_results.bin,'bin') }}
                    {% endif %}
                     
                {% else %}
                    <p class = "no_results">No results found for "{{ query }}" :&#40;</p>
                {% endif %}

            {% else %}
                {{ new_note() }}
                {{ render_notes(notes,'main') }}
            {% endif %}
        </div>        
    </main>
</body>
</html>


