<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
</head>
<body>
    {% from "_macros.html" import toggle_pin_button,toggle_bin_button,toggle_archived_button,edit_button,delete_button,display_date,display_datetime,search_box,comb_main_buttons,comb_archive_buttons,comb_bin_buttons%}
    <header class = "header">
        <a href="#" id="archive-link" data-archive-url="{{ url_for('archive') }}">Archive</a>
        <a href="#" id="bin-link" data-bin-url="{{ url_for('bin') }}">Bin</a>
    </header>

    <div id="app">

        <h1>Notes</h1>

        {{ search_box('index', query) }}

        <div id = "note_bit">
            <form id="note_form" action="/" method="POST">
                <textarea id="note_input" name="note" placeholder="Write a new note..."></textarea>
                <button type="submit">Add Note</button>
            </form>
        </div>

        <div id = notes_list_bit>
            {% if query %}
                
                {% if search_results.main or search_results.archive or search_results.bin %}
                    <h2>Search Results for: "{{ query }}"</h2>
                    {% if search_results.main %}
                        <h3>Main</h3>
                        {% for note in search_results.main %}
                            {{ comb_main_buttons(note) }}
                        {% endfor %}
                    {% endif %}
                    {% if search_results.archive %}
                        <h3>Archive</h3>
                        <!-- Display Archive Search Results -->
                        {% for note in search_results.archive %}
                            {{ comb_archive_buttons(note) }}                  
                        {% endfor %}
                    {% endif %}
                    {% if search_results.bin %}
                        <h3>Bin</h3>
                        <!-- Display Bin Search Results -->
                        {% for note in search_results.bin %}
                            {{ comb_bin_buttons(note) }}
                        {% endfor %}
                    {% endif %}
                     
                {% else %}
                    <p>No results found for "{{ query }}" :&#40;</p>
                {% endif %}

            {% else %}
                <!-- Display Regular Notes -->
                {% for note in notes %}
                    {{ comb_main_buttons(note) }}
                {% endfor %}
            {% endif %}
        </div>        
    </div>
</body>
</html>
