{% macro display_datetime(note) %}
    <div>Last updated:</div>
    <div class="note-date">{{ note.date.strftime('%d-%m-%Y %H:%M') }}</div>
{% endmacro %}


{% macro display_date(note) %}
    <div>Last updated:</div>
    <div class="note-date">{{ note.date.strftime('%d-%m-%Y') }}</div>
{% endmacro %}

{% macro edit_button(note) %}
<form action="{{ url_for('edit_note', note_id=note.id) }}" method="POST" style="display: none;" id="edit-form-{{ note.id }}" class="note-form">
    <textarea name="content">{{ note.content }}</textarea>
    <button type="submit">Save</button>
</form>
<button class="edit-button" data-note-id="{{ note.id }}" class = "notebutton">Edit</button>
{% endmacro %}

{% macro toggle_bin_button(note) %}
    <form action="{{ url_for('toggle_bin', note_id=note.id) }}" method="POST">
        <button type="submit" class="{{ button_class }}">{{ 'Remove from bin' if note.binned else 'Move to bin' }}</button>
    </form>
{% endmacro %}

{% macro toggle_archived_button(note) %}
    <form action="{{ url_for('toggle_archived', note_id=note.id) }}" method="POST" >
        <button type="submit" class="{{ button_class }}">{{ 'Unarchive' if note.archived else 'Archive' }}</button>
    </form>
{% endmacro %}

{% macro toggle_pin_button(note, button_class="toggle_pin_button") %}
    <form action="{{ url_for('toggle_pin',note_id = note.id) }}" method="POST">
        <button type="submit">{{ 'Unpin' if note.pinned else 'Pin' }}</button>
    </form>
{% endmacro %}


{% macro search_box(url, query) %}
    <div id = "search_bit">
        <form action="{{ url_for(url) }}" method="GET">
            <input type="text" name="query" placeholder="Search notes..." value="{{ query }}">
            <button type="submit">Search</button>
        </form>
    </div>
{% endmacro %}

{% macro delete_button(note) %}
    <form action = "{{ url_for('delete_note', note_id = note.id) }}" method = "POST" onsubmit="return confirmDelete()";>
        <button type = "submit" >Delete forever</button>
    </form>
{% endmacro %}

{% macro comb_main_buttons(note) %}
    <p>{{ note.content }}</p>
    {{ edit_button(note) }}
    {{ toggle_archived_button(note) }}
    {{ toggle_bin_button(note) }}
    {{ toggle_pin_button(note) }}
    {{ display_datetime(note) }}
{% endmacro %}

{% macro comb_archive_buttons(note) %}
    <p>{{ note.content }}</p>
    {{ toggle_archived_button(note) }}
    {{ toggle_bin_button(note) }}
    {{ display_date(note) }}
{% endmacro %}

{% macro comb_bin_buttons(note) %}
    <p>{{ note.content }}</p>
    {{ toggle_bin_button(note) }}
    {{ delete_button(note) }}
    {{ display_date(note) }}
{% endmacro %}
